# 2F 和室 端 照明
- light:
  - name: "jsroom_light_01"
    unique_id: jsroom_light_01

    # 照度センサーが10000lx超ならON、それ以外はOFF
    # Jinja テンプレートで評価された文字列を返す必要がある(true/false ではなく "on"/"off")
    state: >-
      {% if states('sensor.1f_jsroom_light_01_illuminance') | int(0) > 10000 %}
        on
      {% else %}
        off
      {% endif %}

    turn_on:
      - service: mqtt.publish
        data:
          topic: zigbee2mqtt/ir_blaster_jsroom_01/set
          payload: '{"ir_code_to_send":"B/kNxQb9AWkBgAMB+wSAA0APQAtAB8AD4AMPwAvgBwdAK8ATQAvgBwPAG0AHQAPAH8ALQAfgAwPAHwH//0CnBq0BrQH9Aa0gAcAjQB9ACwCtYAFABwX9AfsErQGAAUALAf0BgAcBrQGAKwOtAa0BQBMBrQGAC+ANAcAbQAcB+wSAL0ABA/sErQFAAUAH4AMDB60BrQGtAa0B"}'
    turn_off:
      - service: mqtt.publish
        data:
          topic: zigbee2mqtt/ir_blaster_jsroom_01/set
          payload: '{"ir_code_to_send":"BwQOogYAAmoBgAMB7ASAA0APQAtAB8AD4AMPwAvgBwdAK8ATQAvAA0ATwANAE+ADC0APQAPAE+ADB0AXQAMD//8EDuBDpwCvIO9AZ0Bb4AMDQBPAA0AX4AMLQA9AA8AT4AMHQBdAAwH//+ALpwWvAa8BAALAB0AngA+AB+ADCwXsBK8BrwHAB0ABgAsGAAKvAWoBr+AAAUAnwANAAeADC8ABwBPgAwcHrwGvAa8BrwE="}'

# 2F 和室 中 照明
- light:
  - name: "jsroom_light_02"
    unique_id: jsroom_light_02

    # 照度センサーが10000lx超ならON、それ以外はOFF
    # Jinja テンプレートで評価された文字列を返す必要がある(true/false ではなく "on"/"off")
    state: >-
      {% if states('sensor.1f_jsroom_light_02_illuminance') | int(0) > 10000 %}
        on
      {% else %}
        off
      {% endif %}

    turn_on:
      - service: mqtt.publish
        data:
          topic: zigbee2mqtt/ir_blaster_jsroom_02/set
          payload: '{"ir_code_to_send":"ChwOfAYEAl0BBAJ2IAMC2wQEYANAD0ALQAdAA8Ab4AcLwCPAB+AHJ0Av4AMDQCfgAwNAG+ADM0AbwA/AC0AjAf//4B2nQCtAN0AHwEdAC8ATwAfgAxtAC0AjwANAD0An4AMDQBvAF0ALQBvAB0ALQBtADwH//+AVp8AnQCtAN0AHQBPAC+AHB0AfwBNAC0ArQAdAA0ALQBvgAwNAF0ADQBPgBwcL2wQEAnYBBAJ2AQQC"}'
    turn_off:
      - service: mqtt.publish
        data:
          topic: zigbee2mqtt/ir_blaster_jsroom_02/set
          payload: '{"ir_code_to_send":"BcEN9gayAcABAScFgANAAUALQAEC4gGyYAHAD0ABwAvgBwdAAcATwAFAP0AT4AsD4AMBwB9AAcALQDtAAQH//+AZp4ABAeIBQDsEsgHiAbIgAYALAbIBgAcB4gGAB4AB4AMLgAGAH0AX4AcD4AMBwBtAAQEnBYAzB7IBsgGyAbIB"}'

# 2F 洋室 照明
- light:
    - name: "wsroom_light_01"
      unique_id: wsroom_light_01

    # 照度センサーが600lx超ならON、それ以外はOFF
    # Jinja テンプレートで評価された文字列を返す必要がある(true/false ではなく on/off)
      state: >-
        {% if states('sensor.1f_wsroom_light_illuminance') | int(0) > 600 %}
          on
        {% else %}
          off
        {% endif %}
      turn_on:
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_wsroom/set
            payload: '{"ir_code_to_send":"D/cMEwfnAfUE5wFUAecBqgFAA+ARAYAdAecBQC8AqiABAfUEgAPAAeAFD4Aj4A8BQB1AL0ABwAfAAYCLCaoBqgGqAaoBqgE="}'
      turn_off:
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_wsroom/set
            payload: '{"ir_code_to_send":"D/cMEwfnAfUE5wFUAecBqgFAA+ARAYAdAecBQC8AqiABAfUEgAPAAeAFD4Aj4A8BQB1AL0ABwAfAAYCLCaoBqgGqAaoBqgE="}'

# 1F 居間 照明
- light:
    - name: "livingroom_light_01"
      unique_id: livingroom_light_01

    # 照度センサーが10000lx超ならON、それ以外はOFF
    # Jinja テンプレートで評価された文字列を返す必要がある(true/false ではなく on/off)
      state: >-
        {% if states('sensor.1f_livingroom_light_illuminance') | int(0) > 10000 %}
          on
        {% else %}
          off
        {% endif %}
      turn_on:
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_living/set
            payload: '{"ir_code_to_send":"C/AMegdiAVkFYgEAAuADAwCHIA9AA8AT4AULgC9AB4ADAQACQCcBhwHgBQ+AE4AHQAvgCQMDWQViAUAXwAdAC4AD4AI3AgJiAQ=="}'
      turn_off:
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_living/set
            payload: '{"ir_code_to_send":"C/AMegdiAVkFYgEAAuADAwCHIA9AA8AT4AULgC9AB4ADAQACQCcBhwHgBQ+AE4AHQAvgCQMDWQViAUAXwAdAC4AD4AI3AgJiAQ=="}'


# 1F キッチン 照明
- light:
    - name: "kitchen_light"
      unique_id: kitchen_light

      turn_on:
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_kitchen/set
            payload: '{"ir_code_to_send":"B30NDwd4AfEBQAMEnwFRBXggAwOfAZ8BgAcD8QF4AYADA58BUQXgBwtAEwCfIAUHeAFRBXgB8QGAA+ABCwWfAfEBeAHgAQMBnwFAG0ADgAsAn2AHQAEBUQVAEwl4AVEFnwGfAXgB4AcLAf//4AOnAXgBQCcFUQV4AfEBwAeAC0AHwBcBnwFACwGfAeABE0APA3gB8QHgBRPAD0AHQAEG8QF4AVEFnyADA3gB8QFABwGfAUAHQAMBUQXAE0AHgAPgAQsDnwH//0CnDJ8BnwF4AfEBeAFRBZ8gAwF4AYALQAcAn2ABA/EBeAGADwF4AUADwAsFUQWfAZ8BgAdAF0ADgBNAAQd4AfEBnwHxAUAHgAMBUQVAA4ATA1EFeAFAFwCfIAEDUQWfAUALBlEFeAHxAZ8gAQ14AVEFnwHxAXgB8QF4AQ=="}'
      
      turn_off:
        # 5時~17時の場合
        - condition: template
          value_template: "{{ 5 <= now().hour < 17 }}"
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_kitchen/set
            payload: '{"ir_code_to_send":"BdQN0Aa0AcABARkFgAMDtAHeAUAL4AMB4AMPwAvgBwdAAcATgAEC3gG0IAFAE+ADA0ABQA/gAwFAD0ADgDEBtAFAC8ABAf//4A+nAbQB4AMnQAEBGQXAQQW0ARkFtAFADQEZBUAFAbQBwAdAAQMZBbQB4AcBQBPgAwNAAUAP4AMBQA9AA4BRDbQBGQW0AbQBtAG0AbQB"}'

        # 17時~23時の場合
        - condition: template
          value_template: "{{ 17 <= now().hour < 23 }}"
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_kitchen/set
            payload: '{"ir_code_to_send":"CsoN4AaqAaoB3wGqIAEBGQWAA0ABARkFgBMBqgGABwMZBaoBwAGACwHfAeAHB+ADE0ALAKpgAQHfAeABJ+ADCwWqAaoB3wGAA0ABAd8B4AMT4AMLAf//4AenBd8BGQWqAUABwAcEqgHfAaogAYAP4AMLAaoBwBOAB4ABgAsC3wGq4AABAd8BgBMBqgFAB0ADAaoBwBMC3wGq4AIBgBtAAQ3fARkFqgGqAaoBqgHfAQ=="}'
        
        # 23時~翌6時の場合
        - condition: template
          value_template: "{{ now().hour >= 23 or now().hour < 6 }}"
        - action: mqtt.publish
          data:
            topic: zigbee2mqtt/ir_blaster_kitchen/set
            payload: '{"ir_code_to_send":"BdQN0Aa0AcABARkFgAMDtAHeAUAL4AMB4AMPwAvgBwdAAcATgAEC3gG0IAFAE+ADA0ABQA/gAwFAD0ADgDEBtAFAC8ABAf//4A+nAbQB4AMnQAEBGQXAQQW0ARkFtAFADQEZBUAFAbQBwAdAAQMZBbQB4AcBQBPgAwNAAUAP4AMBQA9AA4BRDbQBGQW0AbQBtAG0AbQB"}'